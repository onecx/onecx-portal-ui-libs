<div *ngIf="layout !== 'table'">
  <ocx-data-list-grid
    #ocxdatalistgrid
    [name]="name"
    [data]="data"
    [columns]="columns"
    [filters]="filters"
    [sortDirection]="sortDirection"
    [sortField]="sortField"
    [sortStates]="sortStates"
    [titleLineId]="titleLineId || firstColumnId"
    [subtitleLineIds]="subtitleLineIds"
    [clientSideSorting]="true"
    [pageSizes]="pageSizes"
    [pageSize]="pageSize"
    [paginator]="listGridPaginator"
    [emptyResultsMessage]="emptyResultsMessage"
    [layout]="layout"
    [deletePermission]="deletePermission"
    [editPermission]="editPermission"
    [viewPermission]="viewPermission"
    [additionalActions]="additionalActions"
    [gridItemSubtitleLinesTemplate]="_gridItemSubtitleLines ? gridItemSubtitleLines : undefined"
    [listItemSubtitleLinesTemplate]="_listItemSubtitleLines ? listItemSubtitleLines : undefined"
    [listItemTemplate]="_listItem ? listItem : undefined"
    [gridItemTemplate]="_gridItem ? gridItem  : undefined"
    [totalRecordsOnServer]="totalRecordsOnServer"
  >
  </ocx-data-list-grid>
  <ng-template #listItemSubtitleLines let-item>
    <ng-container
      *ngIf="_listItemSubtitleLines"
      [ngTemplateOutlet]="_listItemSubtitleLines"
      [ngTemplateOutletContext]="{$implicit:item}"
    >
    </ng-container
  ></ng-template>
  <ng-template #gridItemSubtitleLines let-item>
    <ng-container
      *ngIf="_gridItemSubtitleLines"
      [ngTemplateOutlet]="_gridItemSubtitleLines"
      [ngTemplateOutletContext]="{$implicit:item}"
    >
    </ng-container
  ></ng-template>
  <ng-template #gridItem let-item>
    <ng-container *ngIf="_gridItem" [ngTemplateOutlet]="_gridItem" [ngTemplateOutletContext]="{$implicit:item}">
    </ng-container
  ></ng-template>
  <ng-template #listItem let-item>
    <ng-container *ngIf="_listItem" [ngTemplateOutlet]="_listItem" [ngTemplateOutletContext]="{$implicit:item}">
    </ng-container
  ></ng-template>
</div>

<div *ngIf="layout === 'table'">
  <ocx-data-table
    #ocxdatatable
    [rows]="data"
    [columns]="columns"
    [filters]="filters"
    [sortDirection]="sortDirection"
    [sortColumn]="sortField"
    [sortStates]="sortStates"
    [clientSideFiltering]="true"
    [clientSideSorting]="true"
    [pageSizes]="pageSizes"
    [pageSize]="pageSize"
    [paginator]="tablePaginator"
    [selectedRows]="selectedRows"
    [emptyResultsMessage]="emptyResultsMessage"
    [name]="name"
    [deletePermission]="deletePermission"
    [editPermission]="editPermission"
    [viewPermission]="viewPermission"
    [additionalActions]="additionalActions"
    [stringCellTemplate]="_stringTableCell ? stringCell : undefined"
    [numberCellTemplate]="_numberTableCell ? numberCell : undefined"
    [dateCellTemplate]="_tableDateCell ? dateCell : undefined"
    [relativeDateCellTemplate]="_tableRelativeDateCell ? relativeDateCell : undefined"
    [cellTemplate]="_tableCell ? cell : undefined"
    [translationKeyCellTemplate]="_tableTranslationKeyCell ? translationKeyCell : undefined"
    (sorted)="sorting($event)"
    (filtered)="filtering($event)"
    [totalRecordsOnServer]="totalRecordsOnServer"
    [currentPageShowingKey]="currentPageShowingKey"
    [currentPageShowingWithTotalOnServerKey]="currentPageShowingWithTotalOnServerKey"
  >
  </ocx-data-table>
  <ng-template #stringCell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_stringTableCell"
      [ngTemplateOutlet]="_stringTableCell"
      [ngTemplateOutletContext]="{rowObject: rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
  <ng-template #numberCell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_numberTableCell"
      [ngTemplateOutlet]="_numberTableCell"
      [ngTemplateOutletContext]="{rowObject: rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
  <ng-template #dateCell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_tableDateCell"
      [ngTemplateOutlet]="_tableDateCell"
      [ngTemplateOutletContext]="{rowObject:rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
  <ng-template #relativeDateCell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_tableRelativeDateCell"
      [ngTemplateOutlet]="_tableRelativeDateCell"
      [ngTemplateOutletContext]="{rowObject:rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
  <ng-template #cell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_tableCell"
      [ngTemplateOutlet]="_tableCell"
      [ngTemplateOutletContext]="{rowObject: rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
  <ng-template #translationKeyCell let-rowObject="rowObject" let-column="column">
    <ng-container
      *ngIf="_tableTranslationKeyCell"
      [ngTemplateOutlet]="_tableTranslationKeyCell"
      [ngTemplateOutletContext]="{rowObject:rowObject, column:column}"
    >
    </ng-container
  ></ng-template>
</div>
