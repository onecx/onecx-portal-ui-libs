<div
  *ngIf="!globalErrMsg; else globalError"
  class="layout-wrapper"
  [ngClass]="{
    'p-input-filled': inputStyle === 'filled', 
    'p-ripple-disabled': !ripple,
    'layout-menu-active': isStaticalMenuVisible(),
    'layout-menu-button-hidden': isHorizontalMenuMode()
  }"
  [class]="'layout-menu-' + colorScheme + ' layout-topbar-' + topbarTheme"
>
  <ocx-shell-header [menuButtonTitle]="menuButtonTitle" (menuButtonClick)="onMenuButtonClick($event)">
    <div *ngIf="isHorizontalMenuVisible()">
      <ocx-slot name="onecx-shell-horizontal-menu">
        <ng-template #skeleton>
          <div class="ml-4 flex flex-row gap-4">
            <p-skeleton class="w-full h-full inline-block" height="35px" width="120px"></p-skeleton>
            <p-skeleton class="w-full h-full inline-block" height="35px" width="120px"></p-skeleton>
          </div>
        </ng-template>
      </ocx-slot>
    </div>
  </ocx-shell-header>

  <p-toast></p-toast>

  <div class="menu-wrapper">
    <div class="layout-menu-container overflow-auto" *ngIf="isStaticalMenuVisible()">
      <ocx-slot name="onecx-shell-vertical-menu">
        <ng-template #skeleton>
          <p-skeleton class="w-full h-full inline-block p-2" height="35px"></p-skeleton>
        </ng-template>
      </ocx-slot>
    </div>
  </div>

  <div class="layout-main">
    <div class="layout-content relative">
      <ocx-slot name="onecx-shell-sub-header"></ocx-slot>
      <ng-container *ngIf="!showContentProvider || (showContentProvider.showContent$ | async); else appLoading">
        <ng-content></ng-content>
        <router-outlet></router-outlet>
      </ng-container>
    </div>

    <ocx-shell-footer></ocx-shell-footer>
  </div>

  <div *ngIf="menuActive || !!activeTopbarItem" class="layout-mask modal-in"></div>
</div>

<ng-template #globalError>
  <ocx-shell-error [errCode]="globalErrMsg"></ocx-shell-error>
</ng-template>

<ng-template #appLoading>
  <ocx-app-loading-spinner></ocx-app-loading-spinner>
</ng-template>
