[#switch-to-interactive-data-view]
=== Replace p-dataView and DataViewControls with InteractiveDataViewComponent

Replace **p-dataView** and **ocx-data-view-controls** template with **ocx-interactive-data-view** for enhanced data viewing capabilities including sorting, filtering, and layout options.

**Code Changes**

* Remove `<p-dataView>` and PrimeNG `DataViewModule` from `primeng/dataview`
* Remove `<ocx-data-view-controls>` and `DataViewControlsComponent` from `@onecx/portal-integration-angular`.
* Add `InteractiveDataViewComponent` from `@onecx/angular-accelerator`.
* Replace the entire `<p-dataView>` block with `<ocx-interactive-data-view>`.
* Add `<ocx-interactive-data-view>` and update input properties and output events as per tables below.

**Example - Replace ocx-data-view-controls with ocx-interactive-data-view in HTML**

.Before
[source, html]
----
<p-dataView [value]="items" [layout]="'grid'" [paginator]="true" [rows]="20">
  <ng-template pTemplate="header">
    <ocx-data-view-controls
      [supportedViews]="['grid']"
      [initialViewMode]="'grid'"
      [filterValue]="filterValue"
      [enableFiltering]="true"
      (filterChange)="onFilterChange($event, dataView)"
      [enableSorting]="false"
    ></ocx-data-view-controls>
  </ng-template>

  <ng-template pTemplate="gridItem" let-item>
    <div class="card">
      <div>{{ item.name }}</div>
    </div>
  </ng-template>
</p-dataView>
----

.After
[source, html]
----
<ocx-interactive-data-view
  [data]="items"
  [supportedViewLayouts]="['grid']"
  [layout]="'grid'"
  [columns]="columns"
  [filters]="filters"
  [filter]="filterValue"
  [clientSideFiltering]="true"
  [emptyResultsMessage]="'ACTIONS.SEARCH.NO_DATA' | translate"
  (filtered)="onFilterChange($event)"
  (sorted)="onSortChange($event)"
  (dataViewLayoutChange)="onDataViewChange($event)"
>
  <ng-template pTemplate="item" let-item>
    <div class="card">
      <div>{{ item.name }}</div>
    </div>
  </ng-template>
</ocx-interactive-data-view>
----

**Input Properties**

[cols="1,1,2", options="header"]
|===
| DataViewControlsComponent / p-dataView
| InteractiveDataViewComponent
| Notes

| [value] (p-dataView)
| data
| Example: `[data]="items"`

| supportedViews
| supportedViewLayouts
| Example: `[supportedViewLayouts]="['list', 'grid', 'table']"`

| initialViewMode
| layout
| Use `'list'`, `'grid'`, or `'table'`. Example: `[layout]="'list'"`

| filterValue
| filter
| Example: `[filter]="filter"`

| enableFiltering
| clientSideFiltering
| Boolean. Example: `[clientSideFiltering]="true"`

| enableSorting
| clientSideSorting
| Boolean. Example: `[clientSideSorting]="true"`

| sortingOptions
| columns
| Define columns with `id` and `nameKey`.

| defaultSortOption
| sortField
| Use the column id. Example: `[sortField]="'name'"`

| defaultSortDirection
| sortDirection
| Use enum: `DataSortDirection.ASCENDING` or `DataSortDirection.DESCENDING`. Example: `[sortDirection]=DataSortDirection.ASCENDING`

| columnDefinitions
| columns
| Use `id` and `nameKey` for columns.

| columnTemplates
| columnTemplates
| Use `ng-template` with appropriate selectors and Angular content projection.

| dropdownPlaceholderText
| -
| Deprecated. Use translations/i18n. No direct input in new component.

| filterColumns
| filters
| Use filters and `clientSideFiltering`. In filter object, pass columnId and filterType.

| translations
| -
| Please use i18n or translation keys.

| [paginator] (p-dataView)
| listGridPaginator, tablePaginator
| Boolean. Set both or use `[paginator]="true"` to enable for all layouts.

| [rows] (p-dataView)
| pageSize
| Number of items per page. Example: `[pageSize]="20"`

| [rowsPerPageOptions] (p-dataView)
| pageSizes
| Array of page size options. Example: `[pageSizes]="[20, 60, 100]"`

| [alwaysShowPaginator] (p-dataView)
| -
| Paginator is always shown when enabled. No direct equivalent.

| [showCurrentPageReport] (p-dataView)
| -
| Built-in. Automatically shown when pagination enabled.

| currentPageReportTemplate (p-dataView)
| currentPageShowingKey
| Use translation key for page info. Default: `'OCX_DATA_TABLE.SHOWING'`

| [filterBy] (p-dataView)
| -
| Use `[clientSideFiltering]="true"` and `[filter]` instead.

| [emptyMessage] (p-dataView)
| emptyResultsMessage
| Message displayed when no data is available.
|===

**Example - Replace ocx-data-view-controls with ocx-interactive-data-view in TypeScript**

.Before
[source, typescript]
----
filter = '';
sortingOptions = [
  { label: 'Name', value: 'name' },
  { label: 'Date', value: 'date' }
];
columns = [
  { field: 'name', header: 'Name', active: true },
  { field: 'status', header: 'Status', active: true }
];
columnTemplates = []; // column templates here
translations = {
  filterInputPlaceholder: 'Filter...',
  sortDropdownPlaceholder: 'Sort by...',
  // ...other translation keys
};

onSortChange(sort: string) { /* handle sort */ }
onFilterChange(filter: string) { /* handle filter */ }
onDataViewChange(view: 'list' | 'grid') { /* handle view change */ }
onSortDirectionChange(direction: boolean) { /* handle direction */ }
onColumnsChange(activeColumns: string[]) { /* handle columns */ }
----

.After
[source, typescript]
----
import { DataSortDirection } from '@onecx/angular-accelerator';

filter = '';
columns = [
  { id: 'name', nameKey: 'Name', active: true },
  { id: 'status', nameKey: 'Status', active: true }
];
columnTemplates = []; // column template here

onSortChange(event: { sortColumn: string, sortDirection: DataSortDirection }) {
  // handle sort
}
onFilterChange(filters: any[]) {
  // handle filter
}
onDataViewChange(layout: 'list' | 'grid' | 'table') {
  // handle view change
}
onColumnsChange(activeColumnIds: string[]) {
  // handle columns
}
----

**Output events**

[cols="1,1,2", options="header"]
|===
| DataViewControlsComponent
| InteractiveDataViewComponent
| Notes

| sortChange, sortDirectionChange
| sorted
| Emits `{ sortColumn, sortDirection }` object.

| filterChange
| filtered
| Emits array of filter objects.

| dataViewChange
| dataViewLayoutChange
| Emits `'list'`, `'grid'`, or `'table'`.

| columnsChange
| displayedColumnKeysChange
| Emits string[] (array of column ids).
|===

**Template Transformation**

[cols="1,1,2", options="header"]
|===
| p-dataView
| InteractiveDataViewComponent
| Notes

| `pTemplate="header"`
| `pTemplate="topCenter"`
| Keep header template for custom content. Remove only `ocx-data-view-controls` from inside it.

| `pTemplate="gridItem"`
| `pTemplate="item"`
| Use `let-item let-i="index"`

| `pTemplate="listItem"`
| `pTemplate="item"`
| Style by layout class if needed.
|===

**Additional Points**

* **Pagination**: Built-in with automatic current page display. Configure via `[pageSize]` and `[pageSizes]`.
* **Event Handling**: Use `$event.stopPropagation()` on nested action buttons to prevent unintended row selection.
* **Filtering**: Client-side filtering via `[clientSideFiltering]="true"` with `[filter]` binding replaces p-dataView's `[filterBy]`.
* **Translations**: Use i18n or translation keys instead of `translations` input.